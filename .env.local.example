# ===========================================
# Keyway API - Local Development Environment
# ===========================================
# Copy to .env.local and fill in your values
# Run: docker-compose -f ../docker-compose.dev.yml up -d

# Server Configuration
PORT=3000
HOST=0.0.0.0
NODE_ENV=development
LOG_LEVEL=debug

# Database (Docker PostgreSQL on port 5433 to avoid conflicts)
DATABASE_URL=postgresql://keyway:keyway@localhost:5433/keyway

# Crypto Service (Docker)
CRYPTO_SERVICE_URL=localhost:50051

# Encryption Key (same as docker-compose)
ENCRYPTION_KEY=0d2193ca5058af35ab227627c92227405a1f13402317f4375bfe58b52b399a1e

# JWT Secret (dev only)
JWT_SECRET=dev_jwt_secret_at_least_32_characters_long_for_local

# -----------------------------------------
# GitHub App (create at https://github.com/settings/apps/new)
# -----------------------------------------
# For local dev, create a separate "keyway-dev" app with:
# - Callback URL: https://localhost/v1/auth/callback
# - Webhook URL: https://smee.io/YOUR_CHANNEL
# - Request user authorization during installation: ✓
# - Enable Device Flow: ✓

GITHUB_APP_ID=123456
GITHUB_APP_CLIENT_ID=Iv1.xxx
GITHUB_APP_CLIENT_SECRET=xxx
# base64 -i keyway-dev.private-key.pem | tr -d '\n'
GITHUB_APP_PRIVATE_KEY=LS0tLS1CRUdJTi...
GITHUB_APP_WEBHOOK_SECRET=xxx
GITHUB_APP_NAME=keyway-dev

# CORS (allow local frontend)
ALLOWED_ORIGINS=http://localhost:3001

# Frontend URL (for redirects after auth)
FRONTEND_URL=https://localhost

# -----------------------------------------
# Stripe Billing (Test Mode)
# -----------------------------------------
# Get test keys from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_xxx

# Webhook secret from: stripe listen --forward-to localhost:3000/v1/billing/webhook
STRIPE_WEBHOOK_SECRET=whsec_xxx

# Create products at: https://dashboard.stripe.com/test/products
# Then copy the price IDs (price_xxx)
#
# Pricing:
#   Pro:     $4/mo ($40/year)
#   Team:    $15/mo ($150/year)
#   Startup: $39/mo ($390/year)
STRIPE_PRICE_PRO_MONTHLY=price_xxx
STRIPE_PRICE_PRO_YEARLY=price_xxx
STRIPE_PRICE_TEAM_MONTHLY=price_xxx
STRIPE_PRICE_TEAM_YEARLY=price_xxx
STRIPE_PRICE_STARTUP_MONTHLY=price_xxx
STRIPE_PRICE_STARTUP_YEARLY=price_xxx
